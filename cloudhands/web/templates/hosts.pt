<html metal:use-macro="load: base.pt" lang="en">
<div metal:fill-slot="summary">
<section>
<h1>Virtual machines</h1>
<table class="pure-table pure-table-horizontal">
<thead>
<tr><th>Host</th><th>Status</th><th>IP</th><th>Actions</th></tr>
</thead>
<tbody>
<tr
tal:repeat="(itemId, item) items.items()"
tal:attributes="
id itemId
"><td>${item['name']}</td>
<td tal:content="python: 'running' if 'up' in [s.name for s in item.states] else 'stopped'"></td>
<td tal:content="python: item.data['ips'][0] if item.data['ips'] else None"></td>
<td><a tal:attributes="href python: '/'.join(getattr([i for i in item['_links'] if i.rel == 'self'][0], v) for v in ('typ', 'ref'))">Edit</a></td>
</tr>
</tbody>
</table>
</section>
<section>
<ul>
<li tal:repeat="option options.values()">
<form class="pure-form"
tal:define="link option['_links'][0]"
tal:attributes="
name string:${link.rel}_${link.method};
method link.method;
action string:${link.typ}/${link.ref};
id string:option_${repeat['option'].index}">
<fieldset>
<legend>Legend</legend>
<div tal:omit-tag="" tal:repeat="field link.parameters" >
<label tal:attributes="for field.name">
<input tal:attributes="
id field.name;
value field.name;
required python:'required' if field.required else None" />
</label>
</div>
<button type="submit" class="pure-button pure-button-primary">Button</button>
</fieldset>
</form>
</li>
</ul>
</section>
</div>
</html>

